
# VK ⇄ Telegram бот (категории из поста + «подкатегории» через подборки)

Функции:
1) Создание **товара ВК (Market)** из сообщения в ТГ (фото + текст).
2) Два **отложенных поста** на завтра (время — `POST_TIMES`).
3) **Категория** может браться из текста поста (или дефолт из `.env`).
4) **Подкатегории** через **подборки (albums)**: задаются в тексте или по карте `ALBUMS`.

## Установка
```bash
pip install -r requirements.txt
cp .env.example .env  # заполните значения
python main.py
```

## Формат сообщения в ТГ
```
MA-1 classic bomber jacket
Цена: 5500 ₽
Размеры: S/M/L/XL
Артикул: MA1-BLK
Категория: men          # или '2', или #cat2
Подборка: бомберы, #alb123456

Состояние: новое. Свободное описание...
```
- Категория: понимает `men/муж`, `women/жен`, `kids/дет`, `shoes/обув/сумк`, `access/аксесс`, либо число (`2`), либо `#cat2`.
- Подборка: можно писать названия из карты `ALBUMS`, числовые id или `#alb123456` (несколько — через запятую).

## Переменные окружения
```
BOT_TOKEN=...           # Telegram bot token
VK_GROUP_ID=...         # ID сообщества без минуса
VK_TOKEN=...            # токен сообщества (market, photos, wall, groups, offline)
VK_CATEGORY_ID=2        # дефолтная категория (если не указана в посте)
TIMEZONE=Europe/Moscow
POST_TIMES=14:00,18:00
ALBUMS=бомберы:111111,куртки:222222,новинки:333333
```

> Для Railway: добавьте эти переменные в Settings → Variables и установите стартовую команду `python main.py`.
